<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 400">
  <!-- Title -->
  <text x="500" y="30" text-anchor="middle" font-size="20" font-weight="bold" fill="#333">スケジューラ タイミングチャート</text>
  
  <!-- Time axis -->
  <line x1="80" y1="100" x2="920" y2="100" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="940" y="105" font-size="14" fill="#333">時間 (ms)</text>
  
  <!-- Time markers -->
  <text x="80" y="90" text-anchor="middle" font-size="12" fill="#666">0</text>
  <line x1="80" y1="95" x2="80" y2="105" stroke="#666" stroke-width="1"/>
  
  <text x="250" y="90" text-anchor="middle" font-size="12" fill="#666">500</text>
  <line x1="250" y1="95" x2="250" y2="105" stroke="#666" stroke-width="1"/>
  
  <text x="420" y="90" text-anchor="middle" font-size="12" fill="#666">1000</text>
  <line x1="420" y1="95" x2="420" y2="105" stroke="#666" stroke-width="1"/>
  
  <text x="590" y="90" text-anchor="middle" font-size="12" fill="#666">1500</text>
  <line x1="590" y1="95" x2="590" y2="105" stroke="#666" stroke-width="1"/>
  
  <text x="760" y="90" text-anchor="middle" font-size="12" fill="#666">2000</text>
  <line x1="760" y1="95" x2="760" y2="105" stroke="#666" stroke-width="1"/>
  
  <!-- Timer ISR Track -->
  <text x="20" y="145" font-size="13" font-weight="bold" fill="#333">Timer ISR</text>
  <line x1="80" y1="140" x2="920" y2="140" stroke="#CCC" stroke-width="1"/>
  
  <!-- Timer ticks (every 1ms - showing only key points) -->
  <rect x="80" y="130" width="2" height="20" fill="#FF5722"/>
  <rect x="90" y="130" width="2" height="20" fill="#FF5722"/>
  <rect x="100" y="130" width="2" height="20" fill="#FF5722"/>
  <text x="95" y="165" text-anchor="middle" font-size="10" fill="#666">1ms毎</text>
  
  <!-- LED Task Track -->
  <text x="20" y="205" font-size="13" font-weight="bold" fill="#333">LED Task</text>
  <text x="20" y="220" font-size="11" fill="#666">(500ms)</text>
  <line x1="80" y1="210" x2="920" y2="210" stroke="#CCC" stroke-width="1"/>
  
  <!-- LED Task executions -->
  <rect x="80" y="195" width="20" height="30" fill="#4CAF50" stroke="#333" stroke-width="1"/>
  <text x="90" y="213" text-anchor="middle" font-size="11" fill="white">LED</text>
  
  <rect x="250" y="195" width="20" height="30" fill="#4CAF50" stroke="#333" stroke-width="1"/>
  <text x="260" y="213" text-anchor="middle" font-size="11" fill="white">LED</text>
  
  <rect x="420" y="195" width="20" height="30" fill="#4CAF50" stroke="#333" stroke-width="1"/>
  <text x="430" y="213" text-anchor="middle" font-size="11" fill="white">LED</text>
  
  <rect x="590" y="195" width="20" height="30" fill="#4CAF50" stroke="#333" stroke-width="1"/>
  <text x="600" y="213" text-anchor="middle" font-size="11" fill="white">LED</text>
  
  <rect x="760" y="195" width="20" height="30" fill="#4CAF50" stroke="#333" stroke-width="1"/>
  <text x="770" y="213" text-anchor="middle" font-size="11" fill="white">LED</text>
  
  <!-- Counter Task Track -->
  <text x="20" y="275" font-size="13" font-weight="bold" fill="#333">Counter</text>
  <text x="20" y="290" font-size="11" fill="#666">(500ms)</text>
  <line x1="80" y1="280" x2="920" y2="280" stroke="#CCC" stroke-width="1"/>
  
  <!-- Counter Task executions -->
  <rect x="80" y="265" width="20" height="30" fill="#2196F3" stroke="#333" stroke-width="1"/>
  <text x="90" y="283" text-anchor="middle" font-size="10" fill="white">CNT</text>
  
  <rect x="250" y="265" width="20" height="30" fill="#2196F3" stroke="#333" stroke-width="1"/>
  <text x="260" y="283" text-anchor="middle" font-size="10" fill="white">CNT</text>
  
  <rect x="420" y="265" width="20" height="30" fill="#2196F3" stroke="#333" stroke-width="1"/>
  <text x="430" y="283" text-anchor="middle" font-size="10" fill="white">CNT</text>
  
  <rect x="590" y="265" width="20" height="30" fill="#2196F3" stroke="#333" stroke-width="1"/>
  <text x="600" y="283" text-anchor="middle" font-size="10" fill="white">CNT</text>
  
  <rect x="760" y="265" width="20" height="30" fill="#2196F3" stroke="#333" stroke-width="1"/>
  <text x="770" y="283" text-anchor="middle" font-size="10" fill="white">CNT</text>
  
  <!-- System Tick Counter -->
  <text x="20" y="345" font-size="13" font-weight="bold" fill="#333">s_ticks_ms</text>
  <line x1="80" y1="340" x2="920" y2="340" stroke="#CCC" stroke-width="1"/>
  
  <text x="80" y="360" text-anchor="middle" font-size="12" fill="#666">0</text>
  <text x="250" y="360" text-anchor="middle" font-size="12" fill="#666">500</text>
  <text x="420" y="360" text-anchor="middle" font-size="12" fill="#666">1000</text>
  <text x="590" y="360" text-anchor="middle" font-size="12" fill="#666">1500</text>
  <text x="760" y="360" text-anchor="middle" font-size="12" fill="#666">2000</text>
  
  <!-- Notes -->
  <rect x="100" y="320" width="800" height="50" fill="#E3F2FD" stroke="#2196F3" stroke-width="1" rx="3"/>
  <text x="110" y="340" font-size="12" fill="#333">注: Timer ISRは1ms毎に s_ticks_ms をインクリメント。</text>
  <text x="110" y="358" font-size="12" fill="#333">    LED TaskとCounter Taskは500ms周期で実行され、タイミングは同期している。</text>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333"/>
    </marker>
  </defs>
</svg>
